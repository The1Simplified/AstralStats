{% extends "layout.html" %} {% block content %} {% if profile %}
<!-- Start of card-->
<div class="row mb-4" style="border: 1px solid #fff; border-radius: 25px">
  <div
    class="media col-sm-2 p-4 dflex justify-content-center"
    style="border-right: 1px solid #fff"
  >
    <img
      class="rounded-circle account-img"
      src="{{ profile.display_pic_raw|replace('&background=0xababab&mode=Padding', '') }}"
    />
  </div>
  <div class="col-sm-3" style="border-right: 1px solid #fff">
    <div class="friends-body" style="height: 100%">
      <h5 class="friends-detail m-0">{{ profile.display_name }}</h5>
      <p class="friends-detail m-0">{{ profile.real_name }}</p>
      <p class="friends-detail m-0">{{ profile.presence_text }}</p>
      <div class="friends-detail m-0 p-0 col-sm">
        <img
          class="rounded-circle card-img"
          style="width: 16px; height: 16px"
          src="{{ url_for('static', filename='site_pics/Gamerscore-32x32.webp') }}"
        />
        {{ profile.gamer_score }}
      </div>
    </div>
  </div>
  <div class="col no-gutters" style="overflow: hidden;">
    <h3 class="border-bottom">Details</h3>
    {% if profile.detail.bio|length > 0 %}
    <div class="row m-1 no-gutters dflex justify-content-center">
      <p class="" style="text-align: right;">Bio: </p>
      <div class="col-md-auto">
        <p class="friends-detail" style="">{{ profile.detail.bio }}</p>
      </div>
    </div>
    {% endif %} {% if profile.detail.location|length > 0 %}
    <div class="row m-1 no-gutters dflex justify-content-center">
      <p class="" style="text-align: right;">Bio: </p>
      <div class="col-md-auto">
        <p class="friends-detail" style="">{{ profile.detail.location }}</p>
      </div>
    </div>
    {% endif %}
    <div class="row m-1 no-gutters">
      <div class="col">Rep: {{ profile.xbox_one_rep }}</div>
      <div class="col">Tier: {{ profile.detail.account_tier }}</div>
      <div class="col">Tenure: {{ profile.detail.tenure }}</div>
      <div class="col">Gamepass: {{ profile.detail.has_game_pass }}</div>
    </div>
    <div class="row m-1 no-gutters">
      <div class="col">Followers: {{ profile.detail.follower_count }}</div>
      <div class="col">Following: {{ profile.detail.following_count }}</div>
      <div class="col">Xuid: {{ profile.xuid }}</div>
    </div>
    {% if profile.linked_accounts|length > 0 %}
    <div class="row m-1 no-gutters">
      {% for account in profile.linked_accounts %}
      <div class="col">
        {{ account.network_name }}: {{ account.display_name }}
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</div>
<div class="row mb-2">
  <div class="col btn-group dflex justify-content-left">
    <a
      id="list"
      class="btn btn-default btn-md"
      style="background: #107c10; border: 2px solid #107c10"
    >
      <img
        style="width: 16px; height: 16px"
        src="{{ url_for('static', filename='site_pics/Listview-64x64.png') }}"
      />
    </a>
    <a
      id="grid"
      class="btn btn-default btn-md align-center"
      style="border: 2px solid #107c10"
    >
      <img
        style="width: 16px; height: 16px"
        src="{{ url_for('static', filename='site_pics/Gridview-64x64.png') }}"
      />
    </a>
  </div>
  <div class="col btn-group dflex justify-content-around">
    <a
      href="#"
      class="btn btn-default btn-md"
      style="
        background: #107c10;
        border: 2px solid #107c10;
        border-radius: 25px;
      "
      >Friends</a
    >
    <a
      href="#"
      class="btn btn-default btn-md"
      style="border: 2px solid #107c10; border-radius: 25px"
      >Activity</a
    >
    <a
      href="#"
      class="btn btn-default btn-md"
      style="border: 2px solid #107c10; border-radius: 25px"
      >Leaderboards</a
    >
  </div>
  <div class="col"></div>
</div>
<div
  class="container"
  id="list-view"
  style="border: 2px solid #107c10; border-radius: 25px; background: #3a3a3a"
>
  <div class="py-2">
    {% for friend in friends[::-1] %}
    <a href="/{{ friend.display_name }}" class="friend-listview">
      <div class="row">
        <p class="ml-1 text-left" style="width: 20%">
          {{ friend.display_name }}
        </p>
        <p class="text-left" style="width: 20%">{{ friend.real_name }}</p>
        <p class="text-left" style="width: 20%">{{ friend.presence_text }}</p>
        <div class="p-0 col-sm">
          <img
            class="rounded-circle card-img"
            style="width: 16px; height: 16px"
            src="{{ url_for('static', filename='site_pics/Gamerscore-32x32.webp') }}"
          />
          {{ friend.gamer_score }}
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
</div>
<div class="container" id="grid-view">
  <div class="row dflex justify-content-center">
    {% for friend in friends[::-1] %}
    <a href="/{{ friend.display_name }}" class="">
      <div class="m-2" style="width: 20rem">
        <div class="row no-gutters">
          <div class="col-sm-5">
            <img
              class="rounded-circle card-img"
              onerror="javascript:this.src='static/site_pics/default.png'"
              src="{{ friend.display_pic_raw|replace('&background=0xababab&mode=Padding', '') }}"
            />
          </div>
          <div class="col-sm-7">
            <div class="friends-body ml-2" style="height: 100%">
              <h5 class="friends-detail m-0">{{ friend.display_name }}</h5>
              <p class="friends-detail m-0">{{ friend.real_name }}</p>
              <p class="friends-detail m-0">{{ friend.presence_text }}</p>
              <div class="friends-detail m-0 p-0 col-sm">
                <img
                  class="rounded-circle card-img"
                  style="width: 16px; height: 16px"
                  src="{{ url_for('static', filename='site_pics/Gamerscore-32x32.webp') }}"
                />
                {{ friend.gamer_score }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
</div>
<!-- End of card-->
{% else %} {% endif %}

<script>
  var elems = document.getElementsByClassName("friends-detail");
  for (let i = 0; i < elems.length; i++) {
    if (elems[i].scrollWidth > elems[i].offsetWidth) {
      var newElem = document.createElement("marquee");
      newElem.innerHTML = elems[i].innerHTML;
      newElem.setAttribute("Scrollamount", 4);
      elems[i].parentNode.replaceChild(newElem, elems[i]);
    }
  }
</script>
<script>
  $("#grid").css("background", "transparent");
  $("#list").css("background", "#107c10");
  $("#grid-view").hide();
  $("#list-view").show();
  $("#list").click(function (event) {
    $("#grid").css("background", "transparent");
    $("#list").css("background", "#107c10");
    $("#grid-view").hide();
    $("#list-view").show();
  });

  $("#grid").click(function (event) {
    $("#grid").css("background", "#107c10");
    $("#list").css("background", "transparent");
    $("#grid-view").show();
    $("#list-view").hide();
  });
</script>

{% endblock %}
